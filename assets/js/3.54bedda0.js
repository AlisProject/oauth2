(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{169:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),e("p",[t._v("OAuth アプリケーションを登録した際に発行された client_id を指定して下さい")]),t._v(" "),t._m(6),t._v(" "),e("p",[t._v("OAuth アプリケーションを登録した際に指定した redirect_uri の内一つを指定して下さい。")]),t._v(" "),t._m(7),t._v(" "),e("p",[t._v("OAuth アプリケーションのscopeを指定します。\n"),e("code",[t._v("read")]),t._v(" もしくは "),e("code",[t._v("write")]),t._v(" を指定できます。"),e("code",[t._v("read")]),t._v("、"),e("code",[t._v("write")]),t._v("によって使用できるAPIの権限が異なります。詳細は"),e("router-link",{attrs:{to:"/scopes/"}},[t._v("権限一覧")]),t._v("を確認ください。")],1),t._v(" "),t._m(8),t._v(" "),e("p",[e("a",{attrs:{href:"https://tools.ietf.org/html/rfc7636#appendix-B",target:"_blank",rel:"noopener noreferrer"}},[t._v("PKCE"),e("OutboundLink")],1),t._v("で使用するパラメータです。\nALIS API を使用するアプリケーション側で、リクエスト毎に code_verifier、code_challenge を生成し管理して下さい。")]),t._v(" "),e("p",[t._v("例)")]),t._v(" "),t._m(9),t._v(" "),e("p",[t._v("code_verifier, code_challenge 生成例 (JavaScript)")]),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),e("p",[t._v("上記パラメーターの場合,URL は下記の通りです。")]),t._v(" "),t._m(17)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"同意画面のurl作成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同意画面のurl作成","aria-hidden":"true"}},[this._v("#")]),this._v(" 同意画面のURL作成")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"概要"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概要","aria-hidden":"true"}},[this._v("#")]),this._v(" 概要")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("認可コード取得にはユーザーの許可が必要です。\n同意画面へ遷移する際は "),s("code",[this._v("https://alis.to/oauth-authenticate")]),this._v(" の URL に以下のクエリパラメータを加えてください。")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("client_id")]),t._v(" "),e("li",[t._v("redirect_uri")]),t._v(" "),e("li",[t._v("scope")]),t._v(" "),e("li",[t._v("code_challenge")]),t._v(" "),e("li",[t._v("code_challenge_method")]),t._v(" "),e("li",[t._v("response_type")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"各パラメータ説明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#各パラメータ説明","aria-hidden":"true"}},[this._v("#")]),this._v(" 各パラメータ説明")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"client-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#client-id","aria-hidden":"true"}},[this._v("#")]),this._v(" client_id")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"redirect-uri"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redirect-uri","aria-hidden":"true"}},[this._v("#")]),this._v(" redirect_uri")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"scope"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scope","aria-hidden":"true"}},[this._v("#")]),this._v(" scope")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"code-challenge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#code-challenge","aria-hidden":"true"}},[this._v("#")]),this._v(" code_challenge")])},function(){var t=this.$createElement,s=this._self._c||t;return s("pre",[s("code",[this._v('code_verifier = "dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk"\ncode_challenge = "E9Melhoa2OwvFrEMTJguCHaoeK1t8URWbuGJSstw-cM"\n')])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" base64url "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"base64url"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sha256 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"js-sha256"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" code_verifier "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_code_verifier")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" code_challenge "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_code_challenge")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code_verifier"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token template-string"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("`code_verifier = ")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("code_verifier"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token template-string"}},[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("`code_challenge = ")]),e("span",{pre:!0,attrs:{class:"token interpolation"}},[e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("code_challenge"),e("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_code_challenge")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("str")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hash "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sha256"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("arrayBuffer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("base64url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hash"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_code_verifier")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" buf "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Buffer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("alloc")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" buf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" random_num "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("floor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    buf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeUInt8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("random_num"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("base64url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"code-challenge-method"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#code-challenge-method","aria-hidden":"true"}},[this._v("#")]),this._v(" code_challenge_method")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("code_challenge 生成に利用した関数を指定します。上記生成例の場合は SHA256 を利用しているため "),s("code",[this._v("S256")]),this._v(" を指定します。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"response-type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response-type","aria-hidden":"true"}},[this._v("#")]),this._v(" response_type")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("固定値 "),s("code",[this._v("code")]),this._v(" を指定します。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"url例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url例","aria-hidden":"true"}},[this._v("#")]),this._v(" URL例")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("client_id = "),e("code",[t._v("12345678901234")])]),t._v(" "),e("li",[t._v("redirect_uri = "),e("code",[t._v("https://example.com")])]),t._v(" "),e("li",[t._v("scope = "),e("code",[t._v("read")])]),t._v(" "),e("li",[t._v("code_challenge = "),e("code",[t._v("hcCb3gToI1GPZeS_SIYWvaNT_5u0GB1oqOGQJqRKMSE")])]),t._v(" "),e("li",[t._v("code_challenge_method = "),e("code",[t._v("S256")])]),t._v(" "),e("li",[t._v("response_type = "),e("code",[t._v("code")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("pre",[s("code",[this._v("https://alis.to/oauth-authenticate?client_id=12345678901234&redirect_uri=https%3A%2F%2Fexample.com&scope=read&code_challenge=hcCb3gToI1GPZeS_SIYWvaNT_5u0GB1oqOGQJqRKMSE&code_challenge_method=S256&response_type=code\n")])])}],!1,null,null,null);s.default=n.exports}}]);